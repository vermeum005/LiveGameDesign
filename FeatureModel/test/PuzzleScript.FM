root feature PuzzleScript xor { --TopDown --TwodeePlatformer }

feature TopDown or { --TDRealTime --TDOnInput }
	feature TDRealTime {}
	feature TDOnInput or { --TDPlayerMechanics --TDNPCMechanics --TDGoals}
		feature TDPlayerMechanics or {--NPCInteraction --TDTransforming --PlayerMovement}	
			feature NPCInteraction or {--TDPushing --Collect}
				feature TDPushing {_._. Walking}
				feature Collect {_._. Disappear}
				
			feature TDTransforming {}
			feature PlayerMovement or {--TDWalking --TDTrail --Teleport}
				feature TDWalking {}
				feature TDTrail {_._. TDWalking}
				feature Teleport {}
				
		feature TDNPCMechanics or {--Appearance --NPCMovement}
			feature Appearance {--Disappear --Spawn}
				feature Disappear {}
				feature Spawn {}
			feature NPCMovement {--Mirroring --Follow --RMovement}
				feature Mirroring {_._. TDWalking}
				feature Follow {_._. TDWalking}
				feature RMovement {-.-. TDPushing}
			
		feature TDGoals xor {--DestroyItems --ItemOnTarget --Destination --Fill}
			feature DestroyItems {_._. Disappear}
			feature ItemOnTarget {}
			feature Destination {}
			feature Fill {}
			
feature TwodeePlatformer or {--RealTime --OnInput}
	feature RealTime {}
	feature OnInput or {--PlayerMechanics --NPCMechanics --Goals}
		feature PlayerMechanics or {--Movement --Transform --Pushing}
			feature Movement {--Walking --Trail}
				feature Walking {}
				feature Trail {_._. Walking}
				
			feature Transform {}
			feature Pushing {_._. Walking}
		feature NPCMechanics or {--Falling --Spawning --Transform}
			feature Falling {}
			feature Spawning {}
			feature Transform {}
			
		feature Goals xor {--Destination}
			feature Destination {}